<!DOCTYPE html>
<html>
<head>
<title></title>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
</head>
<body>
	<input type="text" id="query"/>
	<button class="submit" value="spotify">Search with Spotify!</button>
	<button class="submit" value="youtube">Search with Youtube!</button>
	<ul id="result"></ul>
	<script type="text/javascript">
	var methods = {
		"youtube": {
			"url": "http://gdata.youtube.com/feeds/api/videos?alt=json&q=",
			handleData: function(data) {
				var array = [];
				for (var video in data.feed.entry) {
					var v = data.feed.entry[video];
					array.push({ "title": v.title.$t, "href": v.link[0].href });
				}
				return array;
			}
		},
		"spotify": {
			"url": "http://ws.spotify.com/search/1/album.json?q=",
			handleData: function(data) {
				var array = [];
				for (var album in data.albums) {
					var a = data.albums[album];
					array.push({ "title": a.name, "href": a.href });
				}
				return array;
			}
		}
	};
	$('.submit').click(function() {
		var handler = methods[$(this).val()];
		$.get(handler.url + $('#query').val(), function(data) {
			var $res = $('#result').html('');
			var d = handler.handleData(data);
			for (var da in d) {
				var entry = d[da];
				var li = $('<li/>');
				var link = $('<a/>').prop('href', entry.href).html(entry.title);
				li.append(link);
				$res.append(li);
			}
		});
	});
	</script>
</body>
</html>
